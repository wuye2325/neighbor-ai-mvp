<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>发布 - 邻里分身</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        body { background: var(--bg-base); }
        .phone-frame { width: 100%; max-width: 375px; min-height: 100vh; margin: 0 auto; background: var(--bg-base); }
        
        /* 顶部导航 */
        .top-nav { display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; background: var(--bg-card); position: sticky; top: 0; z-index: 100; }
        .nav-close { width: 36px; height: 36px; display: flex; justify-content: center; align-items: center; cursor: pointer; color: var(--text-muted); }
        .nav-title { font-size: 17px; font-weight: 600; color: var(--text-primary); }
        .nav-publish { font-size: 15px; font-weight: 600; color: var(--primary); cursor: pointer; padding: 8px 16px; background: var(--primary-bg); border-radius: var(--radius-full); }
        
        /* Tab切换 */
        .tab-switch { display: flex; background: var(--bg-muted); margin: 16px; border-radius: var(--radius-lg); padding: 4px; }
        .tab-btn { flex: 1; padding: 12px; text-align: center; font-size: 15px; font-weight: 600; color: var(--text-secondary); border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s ease; }
        .tab-btn.active { background: var(--bg-card); color: var(--text-primary); box-shadow: var(--shadow-sm); }
        
        /* 表单区域 */
        .form-section { padding: 0 16px 16px; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-size: 14px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
        .form-input { width: 100%; padding: 14px 16px; font-size: 15px; color: var(--text-primary); background: var(--bg-card); border: 1.5px solid var(--border-light); border-radius: var(--radius-lg); outline: none; transition: all 0.2s ease; }
        .form-input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-bg); }
        .form-input::placeholder { color: var(--text-muted); }
        .form-textarea { min-height: 120px; resize: none; line-height: 1.6; }
        
        /* 图片上传 */
        .image-upload { display: flex; gap: 10px; flex-wrap: wrap; }
        .image-item { width: 80px; height: 80px; border-radius: var(--radius-md); overflow: hidden; position: relative; }
        .image-item img { width: 100%; height: 100%; object-fit: cover; }
        .image-item .remove { position: absolute; top: 4px; right: 4px; width: 20px; height: 20px; background: rgba(0,0,0,0.5); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        .image-item .remove i { font-size: 10px; color: white; }
        .image-add { width: 80px; height: 80px; background: var(--bg-muted); border: 2px dashed var(--border-default); border-radius: var(--radius-md); display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; transition: all 0.2s; }
        .image-add:active { background: var(--border-light); }
        .image-add i { font-size: 24px; color: var(--text-muted); margin-bottom: 4px; }
        .image-add span { font-size: 11px; color: var(--text-muted); }
        
        /* 分类选择 */
        .category-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .category-item { padding: 12px 8px; text-align: center; background: var(--bg-card); border: 1.5px solid var(--border-light); border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; }
        .category-item.active { border-color: var(--primary); background: var(--primary-bg); }
        .category-item i { font-size: 20px; color: var(--text-muted); margin-bottom: 6px; display: block; }
        .category-item.active i { color: var(--primary); }
        .category-item span { font-size: 12px; color: var(--text-secondary); }
        .category-item.active span { color: var(--primary); }
        
        /* 价格输入 */
        .price-row { display: flex; gap: 12px; }
        .price-input { flex: 1; }
        .unit-select { width: 100px; }
        
        /* AI 提示 */
        .ai-tip { background: var(--primary-bg); border-radius: var(--radius-lg); padding: 14px 16px; margin-bottom: 20px; display: flex; align-items: flex-start; gap: 12px; }
        .ai-tip-icon { width: 36px; height: 36px; background: var(--primary-gradient); border-radius: 50%; display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
        .ai-tip-icon i { font-size: 16px; color: white; }
        .ai-tip-content { flex: 1; }
        .ai-tip-title { font-size: 13px; font-weight: 600; color: var(--primary); margin-bottom: 4px; }
        .ai-tip-text { font-size: 13px; color: var(--text-secondary); line-height: 1.5; }
        
        /* 发布按钮 */
        .submit-area { padding: 20px 16px; padding-bottom: calc(20px + env(safe-area-inset-bottom, 0px)); background: var(--bg-card); border-top: 0.5px solid var(--border-light); }
        .submit-btn { width: 100%; height: 54px; background: var(--primary-gradient); border: none; border-radius: var(--radius-xl); color: white; font-size: 17px; font-weight: 600; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 8px; box-shadow: var(--shadow-md); transition: all 0.2s; }
        .submit-btn:active { transform: scale(0.98); box-shadow: var(--shadow-sm); }
    </style>
</head>
<body>
    <div class="phone-frame">
        <div class="top-nav">
            <div class="nav-close" onclick="location.href='hall.html'">
                <i class="fas fa-times"></i>
            </div>
            <div class="nav-title">发布</div>
            <div class="nav-publish" onclick="submitForm()">发布</div>
        </div>

        <!-- Tab切换 -->
        <div class="tab-switch">
            <div class="tab-btn active" onclick="switchType('provide')">我可以提供</div>
            <div class="tab-btn" onclick="switchType('need')">我需要帮助</div>
        </div>

        <!-- AI 提示 -->
        <div class="form-section">
            <div class="ai-tip">
                <div class="ai-tip-icon"><i class="fas fa-magic"></i></div>
                <div class="ai-tip-content">
                    <div class="ai-tip-title">AI 分身小贴士</div>
                    <div class="ai-tip-text">描述越详细，分身匹配越精准哦~ 我会自动帮你打标签、推荐给合适的邻居</div>
                </div>
            </div>
        </div>

        <div class="form-section">
            <!-- 标题 -->
            <div class="form-group">
                <label class="form-label">标题</label>
                <input type="text" class="form-input" id="title" placeholder="一句话说清楚，如：周末可以帮忙遛狗">
            </div>

            <!-- 描述 -->
            <div class="form-group">
                <label class="form-label">详细描述</label>
                <textarea class="form-input form-textarea" id="desc" placeholder="详细说明一下，方便邻居了解~"></textarea>
            </div>

            <!-- 图片 -->
            <div class="form-group">
                <label class="form-label">图片 <span style="font-weight: 400; color: var(--text-muted);">（选填，最多9张）</span></label>
                <div class="image-upload" id="imageUpload">
                    <div class="image-add" onclick="addImage()">
                        <i class="fas fa-plus"></i>
                        <span>添加图片</span>
                    </div>
                </div>
            </div>

            <!-- 分类 -->
            <div class="form-group">
                <label class="form-label">分类</label>
                <div class="category-grid">
                    <div class="category-item active" onclick="selectCategory(this)">
                        <i class="fas fa-home"></i>
                        <span>生活服务</span>
                    </div>
                    <div class="category-item" onclick="selectCategory(this)">
                        <i class="fas fa-tools"></i>
                        <span>技能互助</span>
                    </div>
                    <div class="category-item" onclick="selectCategory(this)">
                        <i class="fas fa-box"></i>
                        <span>物品借用</span>
                    </div>
                    <div class="category-item" onclick="selectCategory(this)">
                        <i class="fas fa-users"></i>
                        <span>活动组局</span>
                    </div>
                    <div class="category-item" onclick="selectCategory(this)">
                        <i class="fas fa-hand-holding-heart"></i>
                        <span>临时帮忙</span>
                    </div>
                    <div class="category-item" onclick="selectCategory(this)">
                        <i class="fas fa-info-circle"></i>
                        <span>信息咨询</span>
                    </div>
                </div>
            </div>

            <!-- 价格 -->
            <div class="form-group">
                <label class="form-label">价格</label>
                <div class="price-row">
                    <div class="price-input">
                        <input type="text" class="form-input" id="price" placeholder="输入金额或留空面议">
                    </div>
                    <select class="form-input unit-select" id="unit">
                        <option>次</option>
                        <option>小时</option>
                        <option>天</option>
                        <option>个</option>
                        <option>面议</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="submit-area">
            <button class="submit-btn" onclick="submitForm()">
                <i class="fas fa-paper-plane"></i>
                发布并让分身去匹配
            </button>
        </div>
    </div>

    <script>
        let publishType = 'provide';
        let selectedImages = [];

        function switchType(type) {
            publishType = type;
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // 更新提示文案
            const tip = document.querySelector('.ai-tip-text');
            if (type === 'provide') {
                tip.textContent = '描述越详细，分身匹配越精准哦~ 我会自动帮你打标签、推荐给合适的邻居';
            } else {
                tip.textContent = '告诉我你需要什么，分身会帮你找到能帮忙的邻居~';
            }
        }

        function selectCategory(el) {
            document.querySelectorAll('.category-item').forEach(item => item.classList.remove('active'));
            el.classList.add('active');
        }

        function addImage() {
            if (selectedImages.length >= 9) {
                alert('最多上传9张图片');
                return;
            }
            
            // 模拟添加图片
            const randomId = Math.floor(Math.random() * 100);
            selectedImages.push(`https://picsum.photos/400/400?random=${randomId}`);
            renderImages();
        }

        function removeImage(index) {
            selectedImages.splice(index, 1);
            renderImages();
        }

        function renderImages() {
            const container = document.getElementById('imageUpload');
            container.innerHTML = selectedImages.map((img, i) => `
                <div class="image-item">
                    <img src="${img}" alt="图片">
                    <div class="remove" onclick="removeImage(${i})">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
            `).join('');
            
            if (selectedImages.length < 9) {
                container.innerHTML += `
                    <div class="image-add" onclick="addImage()">
                        <i class="fas fa-plus"></i>
                        <span>添加图片</span>
                    </div>
                `;
            }
        }

        function submitForm() {
            const title = document.getElementById('title').value.trim();
            const desc = document.getElementById('desc').value.trim();
            
            if (!title) {
                alert('请填写标题');
                return;
            }
            
            alert('发布成功！分身正在为你匹配...');
            location.href = 'hall.html';
        }
    </script>
</body>
</html>
