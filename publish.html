<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>å‘å¸ƒ - é‚»é‡Œåˆ†èº«</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        body { background: var(--bg-muted); }
        .phone-frame { width: 100%; max-width: 375px; min-height: 100vh; margin: 0 auto; background: var(--bg-muted); display: flex; flex-direction: column; }
        
        /* é¡¶éƒ¨å¯¼èˆª */
        .top-nav { display: flex; justify-content: space-between; align-items: center; padding: 14px 16px; background: var(--bg-card); border-bottom: 0.5px solid var(--border-light); }
        .nav-close { width: 36px; height: 36px; display: flex; justify-content: center; align-items: center; cursor: pointer; color: var(--text-muted); }
        .nav-title { display: flex; align-items: center; gap: 8px; }
        .nav-title .avatar { width: 28px; height: 28px; background: var(--primary-gradient); border-radius: 50%; display: flex; justify-content: center; align-items: center; }
        .nav-title .avatar i { font-size: 12px; color: white; }
        .nav-title span { font-size: 16px; font-weight: 600; color: var(--text-primary); }
        .nav-action { font-size: 14px; color: var(--text-muted); cursor: pointer; }
        
        /* æ¶ˆæ¯åŒºåŸŸ */
        .messages-container { flex: 1; overflow-y: auto; padding: 16px; }
        
        .message-item { display: flex; margin-bottom: 16px; animation: fadeIn 0.3s ease; }
        .message-item.sent { flex-direction: row-reverse; }
        
        .message-avatar { width: 36px; height: 36px; background: var(--primary-gradient); border-radius: 50%; display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
        .message-avatar i { font-size: 14px; color: white; }
        .message-item.sent .message-avatar { background: var(--bg-card); border: 1.5px solid var(--border-light); }
        .message-item.sent .message-avatar i { color: var(--text-muted); }
        
        .message-content { max-width: 80%; margin: 0 10px; }
        .message-bubble { padding: 14px 18px; border-radius: 20px; font-size: 15px; line-height: 1.6; }
        .message-item.received .message-bubble { background: var(--bg-card); color: var(--text-primary); border-bottom-left-radius: 6px; box-shadow: var(--shadow-xs); }
        .message-item.sent .message-bubble { background: var(--primary-gradient); color: white; border-bottom-right-radius: 6px; }
        .message-time { font-size: 11px; color: var(--text-muted); margin-top: 6px; }
        .message-item.sent .message-time { text-align: right; }
        
        /* å›¾ç‰‡æ¶ˆæ¯ */
        .message-images { display: grid; gap: 4px; margin-top: 8px; border-radius: var(--radius-md); overflow: hidden; }
        .message-images img { width: 100%; border-radius: var(--radius-sm); }
        .message-images.single img { max-height: 200px; object-fit: cover; }
        .message-images.multiple { grid-template-columns: repeat(2, 1fr); }
        
        /* AI é¢„è§ˆå¡ç‰‡ */
        .preview-card { background: var(--bg-card); border-radius: var(--radius-lg); margin-top: 10px; box-shadow: var(--shadow-sm); overflow: hidden; }
        .preview-header { padding: 14px 16px; background: var(--primary-bg); display: flex; align-items: center; gap: 10px; }
        .preview-header i { color: var(--primary); }
        .preview-header span { font-size: 14px; font-weight: 600; color: var(--primary); }
        .preview-body { padding: 16px; }
        .preview-field { margin-bottom: 12px; }
        .preview-field:last-child { margin-bottom: 0; }
        .preview-label { font-size: 12px; color: var(--text-muted); margin-bottom: 4px; }
        .preview-value { font-size: 15px; color: var(--text-primary); font-weight: 500; }
        .preview-value.editable { background: var(--bg-muted); padding: 10px 12px; border-radius: var(--radius-md); cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .preview-value.editable:active { background: var(--border-light); }
        .preview-value input { border: none; background: transparent; font-size: 15px; color: var(--text-primary); width: 100%; outline: none; font-weight: 500; }
        .preview-tags { display: flex; flex-wrap: wrap; gap: 6px; }
        .preview-tag { background: var(--bg-muted); color: var(--text-secondary); padding: 5px 12px; border-radius: var(--radius-full); font-size: 13px; }
        .preview-actions { display: flex; gap: 10px; padding: 14px 16px; border-top: 0.5px solid var(--border-light); }
        .preview-btn { flex: 1; padding: 12px; border-radius: var(--radius-md); font-size: 14px; font-weight: 600; cursor: pointer; text-align: center; border: none; transition: all 0.2s; }
        .preview-btn.edit { background: var(--bg-muted); color: var(--text-secondary); }
        .preview-btn.confirm { background: var(--primary-gradient); color: white; box-shadow: var(--shadow-sm); }
        
        /* å¿«æ·é€‰é¡¹ */
        .quick-options { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .quick-option { background: var(--bg-muted); border: 1px solid var(--border-light); padding: 8px 14px; border-radius: var(--radius-full); font-size: 13px; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; }
        .quick-option:active { background: var(--primary-bg); border-color: var(--primary); color: var(--primary); }
        
        /* è¾“å…¥åŒºåŸŸ */
        .input-area { padding: 12px 16px; background: var(--bg-card); border-top: 0.5px solid var(--border-light); }
        
        /* å›¾ç‰‡é¢„è§ˆ */
        .image-preview { display: flex; gap: 8px; margin-bottom: 10px; }
        .image-preview-item { width: 60px; height: 60px; border-radius: var(--radius-md); overflow: hidden; position: relative; }
        .image-preview-item img { width: 100%; height: 100%; object-fit: cover; }
        .image-preview-item .remove { position: absolute; top: 2px; right: 2px; width: 18px; height: 18px; background: rgba(0,0,0,0.5); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        .image-preview-item .remove i { font-size: 8px; color: white; }
        
        .input-row { display: flex; align-items: flex-end; gap: 10px; }
        .input-field { flex: 1; background: var(--bg-muted); border-radius: var(--radius-xl); padding: 12px 16px; display: flex; align-items: center; }
        .input-field textarea { flex: 1; border: none; background: transparent; font-size: 15px; outline: none; resize: none; max-height: 100px; color: var(--text-primary); line-height: 1.4; }
        .input-field textarea::placeholder { color: var(--text-muted); }
        
        .input-actions { display: flex; gap: 6px; }
        .action-btn { width: 42px; height: 42px; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: all 0.2s; }
        .action-btn.image { background: var(--bg-muted); color: var(--text-muted); }
        .action-btn.image:active { background: var(--primary-bg); color: var(--primary); }
        .action-btn.voice { background: var(--primary-gradient); color: white; box-shadow: var(--shadow-sm); }
        .action-btn.voice:active { transform: scale(0.95); }
        .action-btn.voice.recording { background: var(--error); animation: pulse 1s infinite; }
        .action-btn.send { background: var(--primary-gradient); color: white; box-shadow: var(--shadow-sm); }
        .action-btn.send:disabled { background: var(--bg-muted); color: var(--text-muted); box-shadow: none; }
        
        /* è¯­éŸ³æç¤º */
        .voice-hint { text-align: center; padding: 8px; font-size: 12px; color: var(--text-muted); }
        .voice-hint.recording { color: var(--error); }
        
        /* ç±»å‹é€‰æ‹©å¼¹çª— */
        .type-modal { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 375px; background: var(--bg-card); border-radius: var(--radius-xl) var(--radius-xl) 0 0; z-index: 200; display: none; flex-direction: column; box-shadow: var(--shadow-xl); }
        .type-modal.show { display: flex; animation: slideUp 0.3s ease; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; border-bottom: 0.5px solid var(--border-light); }
        .modal-title { font-size: 17px; font-weight: 600; color: var(--text-primary); }
        .modal-close { width: 32px; height: 32px; display: flex; justify-content: center; align-items: center; cursor: pointer; color: var(--text-muted); }
        .modal-body { padding: 16px; }
        .type-option { display: flex; align-items: center; padding: 16px; background: var(--bg-muted); border-radius: var(--radius-lg); margin-bottom: 10px; cursor: pointer; transition: all 0.2s; border: 2px solid transparent; }
        .type-option:active { transform: scale(0.99); }
        .type-option.selected { border-color: var(--primary); background: var(--primary-bg); }
        .type-icon { width: 48px; height: 48px; background: var(--bg-card); border-radius: var(--radius-md); display: flex; justify-content: center; align-items: center; margin-right: 14px; }
        .type-option.selected .type-icon { background: var(--primary-gradient); }
        .type-icon i { font-size: 22px; color: var(--text-muted); }
        .type-option.selected .type-icon i { color: white; }
        .type-text h4 { font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: 2px; }
        .type-text p { font-size: 13px; color: var(--text-muted); }
        
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.4); z-index: 150; display: none; }
        .modal-overlay.show { display: block; animation: fadeIn 0.3s ease; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <div class="phone-frame">
        <div class="top-nav">
            <div class="nav-close" onclick="location.href='hall.html'">
                <i class="fas fa-times"></i>
            </div>
            <div class="nav-title">
                <div class="avatar"><i class="fas fa-robot"></i></div>
                <span>è·Ÿåˆ†èº«è¯´</span>
            </div>
            <div class="nav-action"></div>
        </div>

        <div class="messages-container" id="messagesContainer">
            <!-- åˆå§‹æ¶ˆæ¯ -->
            <div class="message-item received">
                <div class="message-avatar"><i class="fas fa-robot"></i></div>
                <div class="message-content">
                    <div class="message-bubble">ä½ å¥½å‘€ï¼æƒ³å‘å¸ƒä»€ä¹ˆå‘¢ï¼Ÿè·Ÿæˆ‘è¯´è¯´å°±è¡Œ~</div>
                    <div class="message-time">åˆšåˆš</div>
                    <div class="quick-options">
                        <div class="quick-option" onclick="quickInput('æˆ‘å¯ä»¥å¸®å¿™é›ç‹—')">ğŸ• é›ç‹—</div>
                        <div class="quick-option" onclick="quickInput('æˆ‘ä¼šä¿®å®¶ç”µ')">ğŸ”§ ç»´ä¿®</div>
                        <div class="quick-option" onclick="quickInput('éœ€è¦äººå¸®å¿™')">ğŸ™ æ±‚åŠ©</div>
                        <div class="quick-option" onclick="quickInput('æƒ³æ‰¾äººä¸€èµ·')">ğŸ‘¥ ç»„å±€</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="input-area">
            <div class="image-preview" id="imagePreview"></div>
            <div class="input-row">
                <div class="input-field">
                    <textarea id="messageInput" rows="1" placeholder="è¯´ç‚¹ä»€ä¹ˆï¼Œæˆ–æŒ‰ä½è¯­éŸ³..." oninput="autoResize(this); checkInput()"></textarea>
                </div>
                <div class="input-actions">
                    <div class="action-btn image" onclick="addImage()">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="action-btn voice" id="voiceBtn" onclick="toggleVoice()">
                        <i class="fas fa-microphone"></i>
                    </div>
                </div>
            </div>
            <div class="voice-hint" id="voiceHint">æŒ‰ä½è¯´è¯ï¼Œæ¾å¼€å‘é€</div>
        </div>

        <!-- ç±»å‹é€‰æ‹©å¼¹çª— -->
        <div class="modal-overlay" id="modalOverlay" onclick="closeTypeModal()"></div>
        <div class="type-modal" id="typeModal">
            <div class="modal-header">
                <div class="modal-title">è¿™æ˜¯ä»€ä¹ˆç±»å‹çš„å‘å¸ƒï¼Ÿ</div>
                <div class="modal-close" onclick="closeTypeModal()"><i class="fas fa-times"></i></div>
            </div>
            <div class="modal-body">
                <div class="type-option" onclick="selectType('provide')">
                    <div class="type-icon"><i class="fas fa-hand-holding-heart"></i></div>
                    <div class="type-text">
                        <h4>æˆ‘å¯ä»¥æä¾›</h4>
                        <p>ä½ æœ‰æŠ€èƒ½ã€æœåŠ¡ã€ç‰©å“å¯ä»¥åˆ†äº«</p>
                    </div>
                </div>
                <div class="type-option" onclick="selectType('need')">
                    <div class="type-icon"><i class="fas fa-hands-helping"></i></div>
                    <div class="type-text">
                        <h4>æˆ‘éœ€è¦å¸®åŠ©</h4>
                        <p>ä½ éœ€è¦é‚»å±…çš„å¸®åŠ©æˆ–æœåŠ¡</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedImages = [];
        let isRecording = false;
        let publishType = null;
        let collectedInfo = {
            title: '',
            desc: '',
            price: '',
            tags: [],
            category: ''
        };

        function autoResize(el) {
            el.style.height = 'auto';
            el.style.height = Math.min(el.scrollHeight, 100) + 'px';
        }

        function checkInput() {
            const input = document.getElementById('messageInput');
            const hasText = input.value.trim().length > 0;
            const hasImages = selectedImages.length > 0;
            
            // æ›´æ–°è¯­éŸ³æŒ‰é’®çŠ¶æ€
            const voiceBtn = document.getElementById('voiceBtn');
            if (hasText || hasImages) {
                voiceBtn.className = 'action-btn send';
                voiceBtn.innerHTML = '<i class="fas fa-paper-plane"></i>';
            } else {
                voiceBtn.className = 'action-btn voice';
                voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
            }
        }

        function quickInput(text) {
            document.getElementById('messageInput').value = text;
            checkInput();
        }

        function addImage() {
            if (selectedImages.length >= 9) {
                alert('æœ€å¤šä¸Šä¼ 9å¼ å›¾ç‰‡');
                return;
            }
            
            const randomId = Math.floor(Math.random() * 100);
            selectedImages.push(`https://picsum.photos/400/400?random=${randomId}`);
            renderImagePreview();
            checkInput();
        }

        function removeImage(index) {
            selectedImages.splice(index, 1);
            renderImagePreview();
            checkInput();
        }

        function renderImagePreview() {
            const container = document.getElementById('imagePreview');
            container.innerHTML = selectedImages.map((img, i) => `
                <div class="image-preview-item">
                    <img src="${img}" alt="é¢„è§ˆ">
                    <div class="remove" onclick="removeImage(${i})">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
            `).join('');
        }

        function toggleVoice() {
            const input = document.getElementById('messageInput');
            const hasText = input.value.trim().length > 0;
            const hasImages = selectedImages.length > 0;
            
            if (hasText || hasImages) {
                // å‘é€æ¶ˆæ¯
                sendMessage();
            } else {
                // åˆ‡æ¢å½•éŸ³çŠ¶æ€
                isRecording = !isRecording;
                const voiceBtn = document.getElementById('voiceBtn');
                const voiceHint = document.getElementById('voiceHint');
                
                if (isRecording) {
                    voiceBtn.classList.add('recording');
                    voiceHint.classList.add('recording');
                    voiceHint.textContent = 'ğŸ”´ æ­£åœ¨å½•éŸ³...æ¾å¼€ç»“æŸ';
                } else {
                    voiceBtn.classList.remove('recording');
                    voiceHint.classList.remove('recording');
                    voiceHint.textContent = 'æŒ‰ä½è¯´è¯ï¼Œæ¾å¼€å‘é€';
                    
                    // æ¨¡æ‹Ÿè¯­éŸ³è¯†åˆ«ç»“æœ
                    setTimeout(() => {
                        addAIMessage('æˆ‘å¬åˆ°ä½ è¯´ï¼š"å‘¨æœ«å¯ä»¥å¸®å¿™é›ç‹—ï¼Œæˆ‘æœ‰ç»éªŒï¼Œå®¶é‡Œä¹Ÿå…»äº†é‡‘æ¯›"~ æ˜¯è¿™æ ·å—ï¼Ÿ');
                    }, 500);
                }
            }
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text && selectedImages.length === 0) return;
            
            const container = document.getElementById('messagesContainer');
            const now = new Date();
            const time = now.getHours() + ':' + String(now.getMinutes()).padStart(2, '0');
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            let messageHTML = `
                <div class="message-item sent">
                    <div class="message-avatar"><i class="fas fa-user"></i></div>
                    <div class="message-content">
                        ${text ? `<div class="message-bubble">${text}</div>` : ''}
            `;
            
            if (selectedImages.length > 0) {
                const gridClass = selectedImages.length === 1 ? 'single' : 'multiple';
                messageHTML += `
                    <div class="message-images ${gridClass}">
                        ${selectedImages.map(img => `<img src="${img}" alt="å›¾ç‰‡">`).join('')}
                    </div>
                `;
            }
            
            messageHTML += `<div class="message-time">${time}</div></div></div>`;
            container.innerHTML += messageHTML;
            
            // æ”¶é›†ä¿¡æ¯
            collectedInfo.desc = text;
            
            // æ¸…ç©ºè¾“å…¥
            input.value = '';
            input.style.height = 'auto';
            selectedImages = [];
            renderImagePreview();
            checkInput();
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            container.scrollTop = container.scrollHeight;
            
            // AI å“åº”
            setTimeout(() => {
                if (!publishType) {
                    showTypeModal();
                } else {
                    processWithAI();
                }
            }, 800);
        }

        function addAIMessage(text, extraContent = '') {
            const container = document.getElementById('messagesContainer');
            const now = new Date();
            const time = now.getHours() + ':' + String(now.getMinutes()).padStart(2, '0');
            
            container.innerHTML += `
                <div class="message-item received">
                    <div class="message-avatar"><i class="fas fa-robot"></i></div>
                    <div class="message-content">
                        <div class="message-bubble">${text}</div>
                        ${extraContent}
                        <div class="message-time">${time}</div>
                    </div>
                </div>
            `;
            
            container.scrollTop = container.scrollHeight;
        }

        function showTypeModal() {
            document.getElementById('modalOverlay').classList.add('show');
            document.getElementById('typeModal').classList.add('show');
        }

        function closeTypeModal() {
            document.getElementById('modalOverlay').classList.remove('show');
            document.getElementById('typeModal').classList.remove('show');
        }

        function selectType(type) {
            publishType = type;
            closeTypeModal();
            
            // æ›´æ–°é€‰é¡¹UI
            document.querySelectorAll('.type-option').forEach(el => el.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            // AI ç»§ç»­
            setTimeout(() => {
                processWithAI();
            }, 300);
        }

        function processWithAI() {
            // æ¨¡æ‹ŸAIæ•´ç†ä¿¡æ¯
            collectedInfo.title = extractTitle(collectedInfo.desc);
            collectedInfo.tags = extractTags(collectedInfo.desc);
            collectedInfo.price = extractPrice(collectedInfo.desc);
            
            // æ˜¾ç¤ºé¢„è§ˆå¡ç‰‡
            const previewHTML = `
                <div class="preview-card">
                    <div class="preview-header">
                        <i class="fas fa-magic"></i>
                        <span>å¸®ä½ æ•´ç†å¥½äº†ï¼Œç¡®è®¤ä¸€ä¸‹ï¼Ÿ</span>
                    </div>
                    <div class="preview-body">
                        <div class="preview-field">
                            <div class="preview-label">æ ‡é¢˜</div>
                            <div class="preview-value editable" onclick="editField('title')">
                                <input type="text" id="editTitle" value="${collectedInfo.title}" placeholder="ç‚¹å‡»ç¼–è¾‘">
                                <i class="fas fa-pen" style="color: var(--text-muted); font-size: 12px;"></i>
                            </div>
                        </div>
                        <div class="preview-field">
                            <div class="preview-label">æè¿°</div>
                            <div class="preview-value editable" onclick="editField('desc')">
                                <input type="text" id="editDesc" value="${collectedInfo.desc}" placeholder="ç‚¹å‡»ç¼–è¾‘">
                                <i class="fas fa-pen" style="color: var(--text-muted); font-size: 12px;"></i>
                            </div>
                        </div>
                        <div class="preview-field">
                            <div class="preview-label">ä»·æ ¼</div>
                            <div class="preview-value editable" onclick="editField('price')">
                                <input type="text" id="editPrice" value="${collectedInfo.price || 'é¢è®®'}" placeholder="ç‚¹å‡»ç¼–è¾‘">
                                <i class="fas fa-pen" style="color: var(--text-muted); font-size: 12px;"></i>
                            </div>
                        </div>
                        <div class="preview-field">
                            <div class="preview-label">æ ‡ç­¾ï¼ˆè‡ªåŠ¨è¯†åˆ«ï¼‰</div>
                            <div class="preview-tags">
                                ${collectedInfo.tags.map(t => `<span class="preview-tag">#${t}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="preview-actions">
                        <div class="preview-btn edit" onclick="continueChat()">ç»§ç»­è¯´</div>
                        <div class="preview-btn confirm" onclick="confirmPublish()">ç¡®è®¤å‘å¸ƒ</div>
                    </div>
                </div>
            `;
            
            addAIMessage('æˆ‘å¸®ä½ æ•´ç†äº†ä¸€ä¸‹ï¼Œçœ‹çœ‹å¯¹ä¸å¯¹ï¼Ÿ', previewHTML);
        }

        function extractTitle(desc) {
            if (desc.includes('é›ç‹—')) return 'å‘¨æœ«é›ç‹—æœåŠ¡';
            if (desc.includes('ç»´ä¿®') || desc.includes('ä¿®')) return 'å®¶ç”µç»´ä¿®æœåŠ¡';
            if (desc.includes('è¾…å¯¼')) return 'ä½œä¸šè¾…å¯¼';
            if (desc.includes('è›‹ç³•') || desc.includes('çƒ˜ç„™')) return 'æ‰‹å·¥çƒ˜ç„™';
            return desc.substring(0, 15) + (desc.length > 15 ? '...' : '');
        }

        function extractTags(desc) {
            const tags = [];
            if (desc.includes('é›') || desc.includes('ç‹—')) tags.push('å® ç‰©');
            if (desc.includes('å‘¨æœ«')) tags.push('å‘¨æœ«');
            if (desc.includes('ç»´ä¿®') || desc.includes('ä¿®')) tags.push('ç»´ä¿®');
            if (desc.includes('è¾…å¯¼') || desc.includes('ä½œä¸š')) tags.push('è¾…å¯¼');
            if (tags.length === 0) tags.push('ç”Ÿæ´»æœåŠ¡');
            return tags;
        }

        function extractPrice(desc) {
            const match = desc.match(/(\d+)\s*[å…ƒå—]/);
            return match ? match[1] + 'å…ƒ' : '';
        }

        function editField(field) {
            event.stopPropagation();
        }

        function continueChat() {
            addAIMessage('å¥½çš„ï¼Œç»§ç»­è¯´~ è¿˜æœ‰ä»€ä¹ˆè¦è¡¥å……çš„å—ï¼Ÿ');
            document.getElementById('messageInput').focus();
        }

        function confirmPublish() {
            // è·å–ç¼–è¾‘åçš„å€¼
            collectedInfo.title = document.getElementById('editTitle')?.value || collectedInfo.title;
            collectedInfo.desc = document.getElementById('editDesc')?.value || collectedInfo.desc;
            collectedInfo.price = document.getElementById('editPrice')?.value || collectedInfo.price;
            
            addAIMessage('å‘å¸ƒæˆåŠŸï¼âœ¨ æˆ‘ä¼šå¸®ä½ æ‰¾åˆ°åˆé€‚çš„é‚»å±…~');
            
            setTimeout(() => {
                if (confirm('å»çœ‹çœ‹å¤§å…ï¼Ÿ')) {
                    location.href = 'hall.html';
                }
            }, 1000);
        }

        // å›è½¦å‘é€
        document.getElementById('messageInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
    </script>
</body>
</html>
